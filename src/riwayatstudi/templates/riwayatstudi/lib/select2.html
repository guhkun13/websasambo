<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<script>
    var urlProvinsi = "https://ibnux.github.io/data-indonesia/propinsi.json"

    console.log('url: ' + urlProvinsi);
    $.getJSON(urlProvinsi, function (res) {
        console.log("INSIDE FUNC");
        console.log(res);

        var data = $.map(res, function (obj) {
            obj.text = obj.nama

            return obj;
        });
        console.log(data);

        loadProvinsi(data);
    });


    function loadProvinsi(data) {
        console.log('loadProvinsi');
        $("#select2-provinsi").select2({
            dropdownAutoWidth: true,
            width: '100%',
            data: data
        })
    };

    var selectProv = $('#select2-provinsi');
    $(selectProv).change(function () {
        console.log("on change");

        var value = $(selectProv).val();
        var text = $('#select2-provinsi :selected').text();
        console.log("value = " + value);
        console.log("text = " + text);
    });
</script>